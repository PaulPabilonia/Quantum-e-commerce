{% extends 'quanta/layout.html'%}
{% load static %}

{% block title %}
    AllList
{% endblock %}

{% block body%}
    <h2>All List</h2>
    <!-- choosing a category will only show all the list form that category 
        Ex. cars 
        only all cars that are listed will show/display -->
    <form action="{% url 'category_all_list' %}" method="POST">     
        {% csrf_token %}
        <label>Category:</label>
        <select name="category" class="form-select" aria-label="Default select example" onchange='if(this.value != 0) { this.form.submit(); }'>
            <option disabled selected value>Category Filter</option>
            <option value="fashion">Fashion</option>
            <option value="cars">Cars</option>
            <option value="toys">Toys</option>
            <option value="home">Homes</option>
        </select>
    </form>
    <!-- <div class= 'row'>
    {% for allList in all_listings %}
        <div class="card col-sm-3" style="width: 18rem;">
            <div class="card-header">
                <p id="bid">Price: $<span id="price">{{ allList.starting_price }}</span>
                    by <span id="price">{{ allList.owner }}</span></p>
                <p class="card-text"><small class="text-muted">Last Updated at: {{ allList.update_at | timesince }} ago</small></p>
            </div>
            {% if allList.product_img %}
            <img src="{{ allList.product_img.url }}" class="card-img-top" alt="Url Pictures">
            {% else %}
            <img src="{% static './quanta/images/background-logo.svg' %}" alt="Admin"class="rounded-circle" width="150">
            {% endif %}
            <div class="card-body">
              <h5 class="card-title">{{allList.item_name}}</h5>
              <a href="{% url 'display_list' allList.id %}" class="btn btn-primary">View</a>
              <p class="card-text"><small class="text-muted">Created at: {{ allList.created_at }}</small></p>
            </div>
          </div>
    {% endfor %}
    </div> -->

    <section id="services" class="section">
        <div class="container">
          <div class="section-header">          
            <h2 class="section-title">Products</h2>
            <span>Shop now!</span>
            <p class="section-subtitle">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy</p>
          </div>

          <div class="row">
            {% for active_listing in all_listings %}
            <div class="col-lg-4 col-md-6 col-xs-12">
              <div class="item-boxes services-item wow fadeInDown" data-wow-delay="0.2s">
                <div class="icon color-1">
                    {% if active_listing.product_img %}
                    <img src="{{ active_listing.product_img.url }}" class="" alt="Url Pictures" width="200"
                        height="200">
                    {% else %}
                    <img src="{% static './quanta/images/background-logo.svg' %}" alt="Admin" class="" width="200" height="200">
                    {% endif %}
                </div>
                <h4>{{ active_listing.item_name}}</h4>
                <p>Created at: {{ active_listing.created_at }}</p>
                <a href="{% url 'display_list' active_listing.id %}" class="btn btn-primary mr-2">view</a>
                <a class="btn btn-danger" >Add to cart</a>
              </div>
            </div>
            {% endfor %}
          </div>

        </div>
      </section>
{% endblock%}